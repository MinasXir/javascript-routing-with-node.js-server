<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minas Xirakias</title>
    <link rel="icon" href="favv.svg" sizes="any" type="image/svg+xml" />
    <link rel="icon" type="image/png" href="favv.png" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="nav">
      <div class="logo">
        <h3>Minas Xirakias</h3>
      </div>
      <div class="links">
        <button route="/mywebsite" class="active">Home</button>
        <button route="/about">About</button>
        <button route="/contact">Contact</button>
        <button id="darkButton" onclick="darkMode()">Dark</button>
      </div>
    </div>
    <div id="view"></div>
    <script>
      //dark mode
      function darkMode() {
        document.body.classList.toggle("dark-mode");
        const darkButton = document.getElementById("darkButton");
        darkButton.innerHTML === "Dark"
          ? (darkButton.innerHTML = "Light")
          : (darkButton.innerHTML = "Dark");
      }

      window.addEventListener("DOMContentLoaded", (event) => {
        //start from home if refresh
        window.history.replaceState({}, "name", ["/mywebsite"]);

        //select app view
        const view = document.getElementById("view");

        //select all buttons
        const activeRoutes = Array.from(
          document.querySelectorAll(".links [route]")
        );

        //Function for navigation
        function navigate(eEvent) {
          const route = eEvent.target.attributes[0].value;
          const routInfo = myFirstRouter.routes.filter((r) => {
            return r.path === route;
          })[0];
          !routInfo
            ? alert("No content here")
            : window.history.pushState({}, "name", routInfo.path);
          view.innerHTML = `<div class="${routInfo.class}">${routInfo.teamplate} </div>`;

          activeRoute(eEvent);
          aboutNav();
        }
        //click event trigers navigation function
        activeRoutes.forEach((route) => {
          route.addEventListener("click", navigate, true);
        });

        //Active color on nav item click
        function activeRoute(eEvent) {
          const buttons = Array.from(document.querySelectorAll("button"));
          buttons.forEach((button) => {
            button.classList.remove("active");
          });
          eEvent.target.className = "active";
        }

        //data constructor
        const Router = function (name, routes) {
          return {
            name: name,
            routes: routes,
          };
        };
        const myFirstRouter = new Router("myFirstRouter", [
          {
            path: "/mywebsite",
            name: "Root",
            class: "home",
            teamplate: home(),
          },
          {
            path: "/about",
            name: "About",
            class: "about",
            teamplate: about(),
          },
          {
            path: "/contact",
            name: "Contact",
            class: "contact",
            teamplate: contact(),
          },
        ]);
        //Home page as starting point
        const currentPath = window.location.pathname;
        if (currentPath === "/mywebsite") {
          view.innerHTML = `<div class="${myFirstRouter.routes[0].class}"> ${myFirstRouter.routes[0].teamplate}</div>`;
        }
        //Static pages
        function home() {
          return `
                <h2>
                Hi , I'm Minas a UI <span>developer</span> and UX <span>designer</span> <br>based in Amsterdam.
                </h2>
                <br>
                <button route="/about">About me</button>
                 `;
        }
        function about() {
          const aboutData = {
            titleAbout: "My story in few lines",
            descriptionAbout:
              "Objects , arrays , click events , AJAX requests and more... are some of the words that could describe my everyday life for the last 6 years. You might hear me talking about svg animations with css 3 or how nice and easy is the combination of css grid with flex for responsive web design.",
            titleSkills: "Coding",
            skills: [
              { name: "Vanilla Javascript", level: "medior" },
              { name: "CSS", level: "senior" },
              { name: "HTML", level: "senior" },
              { name: "React", level: "medior" },
              { name: "Web Components", level: "medior" },
            ],
            titleSkillsDesign: "Design",
            skillsDesign: [
              { name: "Adobe Photoshop", level: "senior" },
              { name: " Adobe Illustrator", level: "senior" },
              { name: "Adobe Indesign", level: "medior" },
              { name: "Camptasia", level: "medior" },
            ],
          };
          aboutNav();
          return ` 
               <div id="about-top" class="about-top"><h2>${
                 aboutData.titleAbout
               }</h2><br>
               ${aboutData.descriptionAbout}
              <h4>Go Middle</h4>
               </div>
               <div id="about-middle" class="about-middle">
               <div>
               ${aboutData.titleSkills}
               <br>
                ${aboutData.skills
                  .map(
                    (skill) =>
                      `
               ${skill.name}
               ${skill.level}<br>
               `
                  )
                  .join("")}
               </div>
               <div>
               ${aboutData.titleSkillsDesign}<br>${aboutData.skillsDesign
            .map(
              (skill) =>
                `
               ${skill.name}
               ${skill.level}<br>
               `
            )
            .join("")}
               </div>
               <h4>Go Top</h4>
               <h4>Go Bottom</h4>
               </div>
               <div id="about-bottom" class="about-bottom">
              <h4>Go Top</h4>
               <h4>Go Middle</h4>
                </div>
                 `;
        }
        function contact() {
          return `contact `;
        }
        aboutNav();
        function alla() {
          const laka = Array.from(document.querySelectorAll("h4"));
          var i;
          for (i = 0; i < laka.length; i++) {
            if (laka[i].innerHTML === "Go Middle") {
              laka[i].addEventListener("click", () => {
                document
                  .querySelector(".about-middle")
                  .scrollIntoView({ behavior: "smooth" });
              });
            }
            if (laka[i].innerHTML === "Go Bottom") {
              laka[i].addEventListener("click", () => {
                document
                  .querySelector(".about-bottom")
                  .scrollIntoView({ behavior: "smooth" });
              });
            }
            if (laka[i].innerHTML === "Go Top") {
              laka[i].addEventListener("click", () => {
                document
                  .querySelector(".about-top")
                  .scrollIntoView({ behavior: "smooth" });
              });
            }
          }
        }

        //link to about page on homepage as button
        function aboutNav() {
          const btn = document.querySelector(".home button");
          if (btn)
            btn.addEventListener("click", (eEvent) => {
              navigate(eEvent);
              Array.from(
                document.querySelectorAll(".links [route]")
              )[1].classList.add("active");
            });
          alla();
        }
      });
    </script>
  </body>
</html>
